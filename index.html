<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8">
  <title>Muutoshalu & Muutoskyky -testi</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.5; margin: 0; }
    h1 { margin-bottom: 10px; text-align: center; }
    .intro { max-width: 700px; margin: 0 auto 30px auto; text-align: center; font-size: 1.1em; }
    form { max-width: 800px; margin: 0 auto; }
    .question { margin-bottom: 15px; padding: 10px; border-bottom: 1px solid #ddd; }
    button { margin: 30px auto; display: block; padding: 12px 24px; font-size: 16px; cursor: pointer; }
    #result { margin-top: 30px; padding: 20px; border: 2px solid #333; border-radius: 10px; max-width: 900px; margin-left: auto; margin-right: auto; }
    .highlight { font-weight: bold; font-size: 1.2em; color: darkblue; }
    .grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; margin-top: 5px; }
    .grid label { text-align: center; }
    canvas { margin-top: 20px; max-width: 600px; width: 100%; height: auto; display: block; margin-left: auto; margin-right: auto; }
    @media (max-width: 600px) { .intro { font-size: 1em; padding: 0 10px; } .grid { font-size: 0.8em; } }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <h1>Muutoshalu & Muutoskyky -testi</h1>
  <div class="intro">
    <p>Tämä testi kartoittaa organisaatiosi muutoshalua ja muutoskykyä.</p>
    <p>Vastaa 24 väittämään asteikolla:  
      <br><strong>1 = täysin eri mieltä ... 5 = täysin samaa mieltä</strong></p>
  </div>

  <form id="testForm"></form>
  <button type="button" id="submitBtn">Näytä tulos</button>

  <div id="result" style="display:none;">
    <div id="profileText"></div>
    <canvas id="chartCanvas"></canvas>
    <canvas id="radarChart"></canvas>
  </div>

  <script>
    const questions = [
      // HALU
      { text: "Seuraan aktiivisesti matkailualan trendejä ja pohdin niiden vaikutuksia yritykseeni.", type: "halu", sub: "Nähdä ja tehdä" },
      { text: "Minua motivoi ajatus siitä, että voin olla mukana rakentamassa matkailun tulevaisuutta.", type: "halu", sub: "Nähdä ja tehdä" },
      { text: "Haluan tunnistaa heikkoja signaaleja ja ennakoida asiakkaiden muuttuvia tarpeita.", type: "halu", sub: "Nähdä ja tehdä" },
      { text: "Olen valmis muuttamaan toimintatapoja, jos se tukee yrityksen tulevaisuutta.", type: "halu", sub: "Muuttua" },
      { text: "Koen, että muutokset ovat mahdollisuus, eivät uhka.", type: "halu", sub: "Muuttua" },
      { text: "Olen valmis luopumaan vanhoista käytännöistä, jos ne eivät enää palvele liiketoimintaa.", type: "halu", sub: "Muuttua" },
      { text: "Olen valmis sijoittamaan aikaa, rahaa ja resursseja tulevaisuuden kannalta tärkeisiin uudistuksiin.", type: "halu", sub: "Panostaa" },
      { text: "Näen investoinnit tulevaisuuteen pitkän aikavälin menestyksen edellytyksenä.", type: "halu", sub: "Panostaa" },
      { text: "Haluan kehittää uusia tuotteita ja palveluja, vaikka niistä ei heti syntyisi tuottoa.", type: "halu", sub: "Panostaa" },
      { text: "Olen halukas tekemään yhteistyötä muiden matkailutoimijoiden kanssa tulevaisuuden rakentamiseksi.", type: "halu", sub: "Yhteistyöhön" },
      { text: "Arvostan yhteiskehittämistä ja asiakkaiden osallistamista palvelujen suunnitteluun.", type: "halu", sub: "Yhteistyöhön" },
      { text: "Uskon, että tulevaisuudessa menestyminen vaatii vahvoja verkostoja ja kumppanuuksia.", type: "halu", sub: "Yhteistyöhön" },

      // KYKY
      { text: "Yritykselläni on käytössä työkaluja tai prosesseja, joilla seuraamme alan kehitystä ja trendejä.", type: "kyky", sub: "Nähdä ja tehdä" },
      { text: "Meillä on aikaa ja resursseja tulevaisuuden suunnitteluun ja ennakointiin.", type: "kyky", sub: "Nähdä ja tehdä" },
      { text: "Meillä on osaamista analysoida markkinoiden muutoksia ja sovittaa toimintaa sen mukaan.", type: "kyky", sub: "Nähdä ja tehdä" },
      { text: "Yrityksessämme on joustavat rakenteet ja prosessit, jotka mahdollistavat nopean suunnanmuutoksen.", type: "kyky", sub: "Muuttua" },
      { text: "Pystymme kouluttamaan henkilöstöä tai hankkimaan osaamista muutostarpeiden tueksi.", type: "kyky", sub: "Muuttua" },
      { text: "Olemme aiemminkin onnistuneet muuttamaan liiketoimintaamme muuttuvien olosuhteiden mukaan.", type: "kyky", sub: "Muuttua" },
      { text: "Yritykselläni on riittävät taloudelliset resurssit tarvittaviin investointeihin.", type: "kyky", sub: "Panostaa" },
      { text: "Meillä on osaamista ja kykyä hakea rahoitusta kehittämis- ja kasvuhankkeisiin.", type: "kyky", sub: "Panostaa" },
      { text: "Yritykselläni on toimivat rakenteet, jotka tukevat kasvua ja uudistumista.", type: "kyky", sub: "Panostaa" },
      { text: "Yritykselläni on valmiita verkostoja ja kumppaneita, joiden kanssa voimme kehittää toimintaa.", type: "kyky", sub: "Yhteistyöhön" },
      { text: "Meillä on käytännöt, jotka tukevat avointa vuorovaikutusta muiden toimijoiden kanssa.", type: "kyky", sub: "Yhteistyöhön" },
      { text: "Yrityksessäni on osaamista ja resursseja rakentaa ja ylläpitää kumppanuuksia.", type: "kyky", sub: "Yhteistyöhön" }
    ];

    questions.sort(() => Math.random() - 0.5);

    const form = document.getElementById("testForm");
    questions.forEach((q, i) => {
      const div = document.createElement("div");
      div.className = "question";
      div.innerHTML = `<p>${i+1}. ${q.text}</p>`;
      const grid = document.createElement("div"); grid.className = "grid";
      for (let j = 1; j <= 5; j++) {
        grid.innerHTML += `<label><input type="radio" name="q${i}" value="${j}" data-type="${q.type}" data-sub="${q.sub}"> ${j}</label>`;
      }
      div.appendChild(grid); form.appendChild(div);
    });

    let chartInstance = null; let radarInstance = null;

    function alue(arvo){ if(arvo<=3.3) return "matala"; if(arvo>=6.7) return "korkea"; return "keski"; }

    document.getElementById("submitBtn").addEventListener("click",()=>{
      const answers=document.querySelectorAll("input[type=radio]:checked");
      if(answers.length<questions.length){alert("Vastaa kaikkiin kysymyksiin.");return;}

      let haluScore=0, kykyScore=0;
      answers.forEach(a=>{ if(a.dataset.type==="halu") haluScore+=+a.value; if(a.dataset.type==="kyky") kykyScore+=+a.value; });

      const haluAvg=haluScore/12, kykyAvg=kykyScore/12;
      const haluNorm=((haluAvg-1)/4*10).toFixed(1), kykyNorm=((kykyAvg-1)/4*10).toFixed(1);
      const haluOut=parseFloat(haluNorm).toFixed(1), kykyOut=parseFloat(kykyNorm).toFixed(1);

      // Profiililogiikka (sama kuin ennen)
      const haluTaso=alue(haluNorm), kykyTaso=alue(kykyNorm);
      let profile="... (profiilitekstit kuten aiemmassa versiossa) ...";

      document.getElementById("result").style.display="block";
      document.getElementById("profileText").innerHTML=`<p><strong>Pisteesi:</strong> Muutoshalu = ${haluOut}/10, Muutoskyky = ${kykyOut}/10</p><p>${profile}</p>`;

      // Radar chart data
      function calc(type,sub){
        const relevant=Array.from(answers).filter(a=>a.dataset.type===type&&a.dataset.sub===sub);
        const avg=relevant.reduce((s,a)=>s+ +a.value,0)/relevant.length;
        return ((avg-1)/4*10).toFixed(1);
      }
      const labels=["Nähdä ja tehdä","Muuttua","Panostaa","Yhteistyöhön"];
      const haluData=labels.map(l=>calc("halu",l));
      const kykyData=labels.map(l=>calc("kyky",l));

      const radarCtx=document.getElementById("radarChart").getContext("2d");
      if(radarInstance) radarInstance.destroy();
      radarInstance=new Chart(radarCtx,{
        type:'radar',
        data:{labels:labels,datasets:[
          {label:'Halu',data:haluData,fill:true,backgroundColor:'rgba(0,200,0,0.2)',borderColor:'rgba(0,200,0,0.7)',pointBackgroundColor:'rgba(0,200,0,1)'},
          {label:'Kyky',data:kykyData,fill:true,backgroundColor:'rgba(0,123,255,0.2)',borderColor:'rgba(0,123,255,0.7)',pointBackgroundColor:'rgba(0,123,255,1)'}
        ]},
        options:{scales:{r:{min:0,max:10,ticks:{stepSize:2}}}}
      });
    });
  </script>
</body>
</html>

